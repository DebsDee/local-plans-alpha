{% extends "layout.html" %}

{% block pageTitle %}
  View plan data
{% endblock %}

{% block beforeContent %}
  <a class="govuk-back-link" href="/v3/">Back</a>
{% endblock %}

{% block head %}
{{ super() }}
<!-- include css and js for LeafletJS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
  integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
  crossorigin=""></script>
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      <h1 class="govuk-heading-xl">
        View plan data
      </h1>
      <p class="govuk-body-l">Explore the local plan data on this page, which has been collected and processed by the Digital Land pipeline.</p>

<div class= "govuk-grid-row">
    <div class="govuk-grid-column-full">
      <div id="map" style="height: 400px;" data-module="boundary-map-uk"></div>
    </div>
</div>


<div class= "govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">



    <h3 class="govuk-heading-l govuk-!-margin-top-9">Search the data</h3>

    

        <h3 class="govuk-heading-s">Plan status</h3>


{{ govukSelect({
  id: "sort",
  name: "sort",
  label: {
    text: ""
  },
  items: [
    {
      value: "status",
      text: "Status",
      selected: true

    },
    {
      value: "preparation",
      text: "Preparation"    
      },
    {
      value: "publication",
      text: "Publication"    
      },
        {
      value: "submission",
      text: "Submission"    
      },
    {
      value: "examination",
      text: "Examination"    
      },
        {
      value: "adopted",
      text: "Adopted"    
      }
  
  ]
}) }}
</div>
</div>

  


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

<button class="govuk-button" data-module="govuk-button">
  Apply filter
</button>
<button class="govuk-button" data-module="govuk-button">
  Download results
</button>
</div>
</div>
</div>
</div>
      

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

        <p class="govuk-!-margin-top-5 govuk-!-margin-bottom-9">There are <b>200 adopted plans</b> across <b>150 local planning authorities</b>.</p>

{% from "govuk/components/table/macro.njk" import govukTable %}

{{ govukTable({
  caption: "",
  firstCellIsHeader: true,
  head: [
    {
      text: "Name"
    },
    {
      text: "Status",
      format: "numeric"
    },
    {
      text: "Local planning authority",
      format: "numeric"
    }
  ],
  rows: [
    [
      {
        text: "DPD1"
      },
      {
        text: "Adopted",
        format: "numeric"
      },
      {
        text: "LPA1",
        format: "numeric"
      }
    ],
    [
      {
        text: "DPD2"
      },
      {
        text: "Adopted",
        format: "numeric"
      },
      {
        text: "LPA2",
        format: "numeric"
      }
    ],
    [
      {
        text: "DPD3"
      },
      {
        text: "Submitted",
        format: "numeric"
      },
      {
        text: "LPA3",
        format: "numeric"
      }
    ]
  ]
}) }}

  </div>
</div>

<hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">


  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
    <h3 class="govuk-heading-l">Download national dataset</h3>

    <h3 class="govuk-heading-s">Development plan document data</h3>
          <p>This download includes timetable information relating to all development plan documents in planning authorities local development scheme.</p>

      <p><a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vTwBvGTiQP05bLZ2Livf2Ew8CkAWkAXOfiZygZC3kZ60l2IrqCKEJFPD8oiXmb4AHJ6AV5QkcSAav2O/pubhtml" class="govuk-link">Download CSV 11.7KB</a></p>

<style>

    .govuk-form-group {
      display: inline-block;
    }

</style>

    <hr class="govuk-section-break govuk-section-break--l">


          <h3 class="govuk-heading-s">Policy data</h3>
          <p>This download includes policy data data for all development planning documents contained in all planning authorities current and emerging local plans.</p>

      <p><a href="https://docs.google.com/spreadsheets/d/e/2PACX-1vSTheyrwpOHm7VXxot2Z1Et4qnRTUBBSlG7TasKH9sjBwnsXQt_nqt21bJFEJnwukmuZ1ZaOVMO1UOE/pubhtml" class="govuk-link">Download CSV 15.8KB</a></p>




    </div>
  </div>

{% endblock %}


{% block pageScripts %}
  <script>
const $mapElement_uk = document.querySelector('[data-module="boundary-map-uk"]');
if ($mapElement_uk) {
  // Tile layers
  var tiles = L.tileLayer("https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png", {
    attribution:
      '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  });
  // govuk consistent colours
  var colours = {
    lightBlue: "#1d70b8",
    darkBlue: "#003078",
    brown: "#594d00",
    yellow_brown: "#a0964e"
  };
  var latLng = L.latLng(52.561928, -1.464854);
  var map = L.map("map", {
    center: latLng,
    zoom: 6,
    layers: [tiles]
  });
  var govukStyle = {
    fillOpacity: 0.2,
    weight: 2,
    color: colours.darkBlue,
    fillColor: colours.lightBlue
  }
    var la_boundaries = new L.geoJSON();
    la_boundaries.addTo(map);
    fetch("https://opendata.arcgis.com/datasets/3a4fa2ce68f642e399b4de07643eeed3_0.geojson")
    .then((response) => {
      return response.json();
    })
    .then((data) => {
      data.features.forEach(function(d) {
        la_boundaries.addData(d);
      });
      la_boundaries.setStyle(govukStyle);
    });
}
</script>
{% endblock %}